-- MYSQL SCRIPT GENERATED BY MYSQL WORKBENCH
-- 04/10/16 22:11:37
-- MODEL: NEW MODEL    VERSION: 1.0
-- MYSQL WORKBENCH FORWARD ENGINEERING

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- SCHEMA PTSI
-- -----------------------------------------------------

-- -----------------------------------------------------
-- SCHEMA PTSI
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `PTSI`;

CREATE SCHEMA IF NOT EXISTS `PTSI` DEFAULT CHARACTER SET UTF8 ;
USE `PTSI` ;

-- -----------------------------------------------------
-- TABLE `PTSI`.`ATO_PROFISSAO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PTSI`.`ATO_PROFISSAO` (
  `ID_ATO_PROFISSAO` INT NOT NULL,
  `FK_ID_PAI` INT NULL,
  `NUMERACAO_ATO` VARCHAR(45) NOT NULL,
  `DESIGNACAO` TEXT NOT NULL,
  `DESCRICAO` TEXT NOT NULL,
  `ESTADO` TINYINT(1) NOT NULL,
  PRIMARY KEY (`ID_ATO_PROFISSAO`),
  INDEX `FK_ATO_PROFISSAO_ATO_PROFISSAO_IDX` (`FK_ID_PAI` ASC),
  CONSTRAINT `FK_ATO_PROFISSAO_ATO_PROFISSAO`
    FOREIGN KEY (`FK_ID_PAI`)
    REFERENCES `PTSI`.`ATO_PROFISSAO` (`ID_ATO_PROFISSAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = INNODB;


-- -----------------------------------------------------
-- TABLE `PTSI`.`ENTIDADE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PTSI`.`ENTIDADE` (
  `ID_ENTIDADE` INT NOT NULL,
  `NOME` VARCHAR(255) NOT NULL,
  `WEBSITE` VARCHAR(255) NOT NULL,
  `ESTADO` TINYINT(1) NOT NULL,
  PRIMARY KEY (`ID_ENTIDADE`))
ENGINE = INNODB;


-- -----------------------------------------------------
-- TABLE `PTSI`.`CURSO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PTSI`.`CURSO` (
  `ID_CURSO` INT NOT NULL,
  `FK_ID_ENTIDADE` INT NOT NULL,
  `NOME` VARCHAR(255) NOT NULL,
  `SIGLA` VARCHAR(10) NOT NULL,
  `GRAU` INT NOT NULL,
  `ECTS` INT NOT NULL,
  `DURACAO` INT NOT NULL,
  `REGIME` VARCHAR(10) NOT NULL,
  `LOCAL` VARCHAR(255) NOT NULL,
  `DESCRICAO` TEXT NOT NULL,
  `SAIDAS` TEXT NOT NULL,
  `ESTADO` TINYINT(1) NOT NULL,
  PRIMARY KEY (`ID_CURSO`),
  INDEX `FK_CURSO_ENTIDADE1_IDX` (`FK_ID_ENTIDADE` ASC),
  CONSTRAINT `FK_CURSO_ENTIDADE1`
    FOREIGN KEY (`FK_ID_ENTIDADE`)
    REFERENCES `PTSI`.`ENTIDADE` (`ID_ENTIDADE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = INNODB;


-- -----------------------------------------------------
-- TABLE `PTSI`.`UNIDADE_CURRICULAR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PTSI`.`UNIDADE_CURRICULAR` (
  `ID_UNIDADE_CURRICULAR` INT NOT NULL,
  `ID_CURSO` INT NOT NULL,
  `NOME` VARCHAR(255) NOT NULL,
  `ECTS` INT NOT NULL,
  `ANO` INT NOT NULL,
  `SIGLA` VARCHAR(10) NOT NULL,
  `ESTADO` TINYINT(1) NOT NULL,
  PRIMARY KEY (`ID_UNIDADE_CURRICULAR`),
  INDEX `FK_UNIDADE_CURRICULAR_CURSO1_IDX` (`ID_CURSO` ASC),
  CONSTRAINT `FK_UNIDADE_CURRICULAR_CURSO1`
    FOREIGN KEY (`ID_CURSO`)
    REFERENCES `PTSI`.`CURSO` (`ID_CURSO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = INNODB;


-- -----------------------------------------------------
-- TABLE `PTSI`.`ATO_PROFISSAO_UNIDADE_CURRICULAR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PTSI`.`COBERTURA_ATOS_UC` (
  `ID_COBERTURA` INT NOT NULL,
  `ID_UC` INT NOT NULL,
  `ID_ATO_PROFISSAO` INT NOT NULL,
  `AVALIACAO` INT NOT NULL,
  `DATA_AVALIACAO` DATETIME NOT NULL,
  `ESTADO` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID_COBERTURA`),
  INDEX `FK_ATO_PROFISSAO_UNIDADE_CURRICULAR_UNIDADE_CURRICULAR1_IDX` (`ID_UC` ASC),
  INDEX `FK_ATO_PROFISSAO_UNIDADE_CURRICULAR_ATO_PROFISSAO1_IDX` (`ID_ATO_PROFISSAO` ASC),
  CONSTRAINT `FK_ATO_PROFISSAO_UNIDADE_CURRICULAR_UNIDADE_CURRICULAR1`
    FOREIGN KEY (`ID_UC`)
    REFERENCES `PTSI`.`UNIDADE_CURRICULAR` (`ID_UNIDADE_CURRICULAR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_ATO_PROFISSAO_UNIDADE_CURRICULAR_ATO_PROFISSAO1`
    FOREIGN KEY (`ID_ATO_PROFISSAO`)
    REFERENCES `PTSI`.`ATO_PROFISSAO` (`ID_ATO_PROFISSAO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = INNODB;


-- -----------------------------------------------------
-- TABLE `PTSI`.`AUDIT_TRAIL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PTSI`.`AUDIT_TRAIL` (
  `IDAUDIT_TRAIL` INT NOT NULL AUTO_INCREMENT,
  `DATA_ALTERACAO` DATETIME NOT NULL,
  `DESC_ALTERACAO` VARCHAR(255),
  PRIMARY KEY (`IDAUDIT_TRAIL`))
ENGINE = INNODB;


-- -----------------------------------------------------
-- TABLE `PTSI`.`CREDENCIAL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `PTSI`.`CREDENCIAL` (
  `IDCREDENCIAL` INT NOT NULL AUTO_INCREMENT,
  `PASSWORD_ADMINISTRACAO` VARCHAR(255) NOT NULL,
  `DATA_ALTERACAO` DATETIME NOT NULL,
  `USERNAME_ADMINISTRACAO` VARCHAR(45) NOT NULL,
  `ESTADO` INT NOT NULL,
  `AUTH_KEY` VARCHAR(255) NOT NULL,
  PRIMARY KEY (`IDCREDENCIAL`))
ENGINE = INNODB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
